<h1 id="optimizingdota2performanceonlinuxwithvulkanonnvidiagraphicscards">Optimizing Dota 2 Performance on Linux with Vulkan on NVIDIA Graphics Cards</h1>

<p><em>Tags:</em></p>

<ul>
<li><img align="left" width="30" height="30" src="/assets/icons/gaming.jpg"> &nbsp; Gaming</li>

<li><img align="left" width="30" height="30" src="/assets/icons/nvidia.png"> &nbsp; NVIDIA</li>

<li><img align="left" width="30" height="30" src="/assets/icons/vulkan.png"> &nbsp; Vulkan</li>

<li><img align="left" width="30" height="30" src="/assets/icons/dota.png"> &nbsp; Dota</li>
</ul>

<p>Gaming on the <strong>Linux</strong> platform is extremely underrated and is often completely <em>rejected</em> by most gamers when it comes to high-FPS gaming. In this blog, I will present a stark contrast to the above idea. The game of <a href="https://www.dota2.com/play/">Dota 2</a> does not need any introduction, and being a Linux enthusiast and a Dota addict, I'd love to share a few simple tips on optimizing Dota 2 performance on Linux.</p>

<p><em>Spoilers:</em> As I will demonstrate, after following the steps given in this blog you should have a significantly higher FPS compared to Dota running on Windows on identical hardware (about 30-40 FPS, depending on your graphics card).</p>

<h2 id="requirements">Requirements</h2>

<ul>
<li>NVIDIA Graphics card with Vulkan support and a Linux Distro</li>

<li>Your graphics drivers are updated and working correctly</li>

<li>I'll assume that you have got <a href="https://store.steampowered.com/">Steam</a> installed with <a href="https://www.dota2.com/play/">Dota 2</a> up and running.</li>
</ul>

<h2 id="letsgettotherealbusiness">Let's Get to the Real Business</h2>

<p>As stated in the title, we will be needing <a href="https://www.khronos.org/vulkan/">Vulkan</a>. At the time of writing, my NVIDIA Driver version is 430.26 running on <em>Arch Linux</em> as shown below:</p>

<pre><code>[rohan@archlinux ~]$ nvidia-smi 
Mon Jun 24 21:42:46 2019       
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 430.26       Driver Version: 430.26       CUDA Version: 10.2     |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|===============================+======================+======================|
|   0  GeForce GTX 1050    Off  | 00000000:01:00.0 Off |                  N/A |
| N/A   50C    P3    N/A /  N/A |    230MiB /  4042MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+

+-----------------------------------------------------------------------------+
| Processes:                                                       GPU Memory |
|  GPU       PID   Type   Process name                             Usage      |
|=============================================================================|
|    0       786      G   /usr/lib/Xorg                                183MiB |
|    0      1003      G   ...uest-channel-token=13847652062622588702    47MiB |
+-----------------------------------------------------------------------------+
[rohan@archlinux ~]$ uname -r
5.1.12-arch1-1-ARCH
</code></pre>

<p>To install the NVIDIA graphics drivers and Vulkan support, please find the installation instructions for your respective distro. If you are running Arch Linux, you can install the latest nvidia graphics drivers and vulkan support with the command <code>sudo pacman -S nvidia-dkms vulkan-icd-loader</code>. What makes the 430 driver special is that, it received notable performance improvements for <a href="https://www.khronos.org/vulkan/">Vulkan</a>. The installation of <a href="https://store.steampowered.com/">Steam</a> is also straightforward for most distros. If you are on Arch, follow <a href="https://wiki.archlinux.org/index.php/Steam">these</a> instructions to install <a href="https://store.steampowered.com/">Steam</a>. In my experience, you might need <a href="https://www.archlinux.org/packages/extra/x86_64/nvidia-utils/">nvidia-utils</a> and <a href="https://www.archlinux.org/packages/multilib/x86_64/lib32-nvidia-utils/">lib32-nvidia-utils</a> to get <a href="https://store.steampowered.com/">Steam</a>. With <a href="https://store.steampowered.com/">Steam</a> up and running, installing and running <a href="https://www.dota2.com/play/">Dota 2</a> should be a piece of cake. To monitor your FPS turn on the <a href="https://store.steampowered.com/">Steam</a> FPS counter by opening <a href="https://store.steampowered.com/">Steam</a> and going to Steam -> Settings -> In-Game and adjust the <em>In-game FPS counter</em> to your liking. Now opening Dota, going to Settings -> Video, under options, the rendering API should be <em>OpenGL</em> as shown:</p>

<p><img src="https://imgur.com/GExarRb" alt="Rendering API" /></p>

<p>We are almost done!!! In order to enable <em>Vulkan</em>, a few more steps need to be performed. Quit Dota go to the Steam Library page. Right click on <em>Dota 2</em>, click on <em>View Downloadable Content</em>, move to the <em>DLC</em> tab and check the option <em>Dota 2 - Vulkan Support</em>. You'll immediately see a download has started.</p>

<p><img src="https://imgur.com/YeiKxNP" alt="View Downloadable Content" />
<img src="https://imgur.com/mhSJble" alt="Check option" /></p>

<p>Meanwhile as the Download progresses, again go to the <em>Steam Library</em> page, right click on <em>Dota 2</em>, click on <em>Properties</em> and under the <em>General</em> tab click on <em>SET LAUNCH OPTIONS</em> and add the following options: <strong>-vconsole -vulkan</strong> and close it.</p>

<p><img src="https://imgur.com/oX7TwCc" alt="Properties" />
<img src="https://imgur.com/v9R3pTZ" alt="Launch Options" />
<img src="https://imgur.com/rsAygYz" alt="Set vulkan flags" /></p>

<p>On opening Dota 2, under Settings -> Video, your rendering API should now be Vulkan as shown:</p>

<p><img src="https://imgur.com/j8tnwPj" alt="Vulkan" /></p>

<p>On the right side of the page, under rendering, to your surprise, under rendering, you will find a new option <strong>Compute Shaders</strong>. Check that option as it will also help a lot in increasing your Dota 2 performance.</p>

<p><img src="https://imgur.com/VNxHSwp" alt="Compute Shaders" /></p>

<p>As you can see, the above screenshot was taken on my laptop with an NVIDIA 1050 GPU and has the <em>Game Screen Rendering Quality</em> to be at <em>100%</em>. The maximum FPS was auto-detected to be at 150 fps. That's all you had to do. Now enjoy the game of Dota 2 to the fullest!!!</p>

<h2 id="results">Results</h2>

<p>I have tried these settings on quite a few laptops with varying NVIDIA Graphics cards. On a laptop with NVIDIA GeForce GTX 1050 4 GB VRAM variant, <strong>Arch Linux</strong> (same specs as mine) with <strong>Vulkan</strong> and the above steps applied, the average FPS varies from <strong>100</strong> to <strong>110</strong> whereas on <strong>Windows</strong> running <strong>DirectX 12</strong>, the average FPS was about <strong>60 - 65</strong>. On my laptop I have only Linux installed, and the average FPS with <strong>Vulkan</strong> is identical. On a laptop with NVIDIA 1060 6 GB variant, the <strong>Vulkan</strong> performance under <strong>Arch Linux</strong> was about <strong>120</strong> FPS whereas on <strong>Windows</strong> with <strong>DirectX 12</strong>, it was about <strong>80 - 85</strong> FPS. But on using <strong>OpenGL</strong> on <strong>Arch Linux</strong> instead of <strong>Vulkan</strong>, it dropped to <strong>90</strong> FPS. Thus you can see that there is a significant improvement on using <strong>Vulkan</strong> in Linux for Dota 2. All these facts hints at one common fact that - gaming performance is steadily improving on Linux and with <a href="https://www.valvesoftware.com/en/">Valve</a> trying their best to push Linux gaming and providing immense support to the Linux gaming community with their Steam <a href="https://github.com/ValveSoftware/Proton">Proton</a> API, things are simply getting better and better. What can be better than having a Linux Distro which we can tweak for optimum performance with our own free will? Enough small talk, I simply can't wait to get back to Dota.</p>